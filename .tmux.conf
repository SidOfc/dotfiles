# Settings {{{
  setw -g  aggressive-resize  on
  setw -g  mode-keys          vi
  set  -g  focus-events       on
  set  -g  default-shell      $SHELL
  set  -g  prefix             C-a
  set  -g  renumber-windows   on
  set  -g  base-index         1
  set  -g  default-terminal   "xterm-256color"
  set  -ga terminal-overrides ",xterm-256color:Tc"
  set  -sg escape-time        0

  # use only name of shell instead of entire $SHELL
  tmux__shell="basename $SHELL"
  set  -g  default-command    "reattach-to-user-namespace -l $tmux__shell"
# }}}

# Keybindings {{{
  unbind %
  unbind '"'
  unbind C-b
  unbind [

  bind C-a send-prefix
  bind <   swap-window  -t -1
  bind >   swap-window  -t +1
  bind -   split-window -v       -c '#{pane_current_path}'
  bind \   split-window -h       -c '#{pane_current_path}'
  bind q   split-window -v -l 10 -c '#{pane_current_path}'
  bind C-d kill-window
  bind c   new-window            -c '#{pane_current_path}'
  bind s   setw         synchronize-panes
  bind e   send-keys    -R \; send-keys C-l
  bind r   source-file  ~/.tmux.conf
  bind h   resize-pane  -L 10
  bind j   resize-pane  -D 10
  bind k   resize-pane  -U 10
  bind l   resize-pane  -R 10
  bind a   copy-mode
  bind C-a copy-mode

  # seamless pane switching between vim and tmux
  # see: https://github.com/christoomey/vim-tmux-navigator
  tmux__is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
      | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"

  bind-key -n C-h if-shell "$tmux__is_vim" "send-keys C-h"  "select-pane -L"
  bind-key -n C-j if-shell "$tmux__is_vim" "send-keys C-j"  "select-pane -D"
  bind-key -n C-k if-shell "$tmux__is_vim" "send-keys C-k"  "select-pane -U"
  bind-key -n C-l if-shell "$tmux__is_vim" "send-keys C-l"  "select-pane -R"
  bind-key -T copy-mode-vi 'v'    send -X begin-selection
  bind-key -T copy-mode-vi 'y'    send -X copy-selection-and-cancel
  bind-key -T copy-mode-vi 'K'    send -X previous-paragraph
  bind-key -T copy-mode-vi 'J'    send -X next-paragraph
  bind-key -T copy-mode-vi Escape send -X cancel
# }}}

# Theming {{{
  # originally generated by tmuxline.vim, modified to be easier to configure manually.

  tmux__background="#2f3132"
  tmux__light_gray="#c8cacb"
  tmux__lighter_gray="#aeb0b1"
  tmux__gray="#949697"
  tmux__col188="colour188"
  tmux__purple="#9F73C0"
  tmux__red="#B43E48"
  tmux__yellow="#e6cd69"
  tmux__blue="#55b5db"
  tmux__green="#4f7660"
  tmux__primary="#59935D"

  tmux__border="#666666"
  tmux__dot_fg=$tmux__primary

  tmux__date_fg=$tmux__gray
  tmux__date_bg=$tmux__background

  tmux__time_fg=$tmux__background
  tmux__time_bg=$tmux__primary

  tmux__win_fg=$tmux__light_gray
  tmux__win_bg=$tmux__background

  tmux__selected_win_fg=$tmux__background
  tmux__selected_win_bg=$tmux__primary

  set  -g status-justify               "left"
  set  -g status                       "on"
  set  -g status-attr                  "none"
  set  -g message-command-bg           $tmux__background
  set  -g status-left-length           "100"
  set  -g pane-border-fg               $tmux__primary
  set  -g pane-active-border-fg        $tmux__border
  set  -g status-bg                    $tmux__background
  set  -g message-command-fg           $tmux__background
  set  -g message-bg                   $tmux__background
  set  -g status-left-attr             "none"
  set  -g status-right-attr            "none"
  set  -g status-right-length          "100"
  set  -g message-fg                   $tmux__primary
  setw -g window-status-fg             $tmux__col188
  setw -g window-status-attr           "none"
  setw -g window-status-activity-bg    $tmux__background
  setw -g window-status-activity-attr  "underscore"
  setw -g window-status-activity-fg    $tmux__col188
  setw -g window-status-separator      ""
  setw -g window-status-bg             $tmux__background
  set  -g status-left                  "#[fg=$tmux__dot_fg,bold] ⬤ "
  set  -g status-right                 "#[fg=$tmux__date_fg,bold,bg=$tmux__date_bg] %d·%m·%Y #[fg=$tmux__time_fg,bg=$tmux__time_bg,nobold,nounderscore,noitalics] %R "
  setw -g window-status-format         "#[fg=$tmux__gray,bold,bg=$tmux__win_bg] #I #W #[fg=$tmux__win_bg,bg=$tmux__win_bg,nobold,nounderscore,noitalics]"
  setw -g window-status-current-format "#[fg=$tmux__selected_win_fg,bg=$tmux__selected_win_bg,bold] #I #W "
# }}}
